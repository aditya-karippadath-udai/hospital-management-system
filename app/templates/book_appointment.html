{% extends "base.html" %}

{% block title %}Confirm Appointment Appointment{% endblock %}

{% block content %}
<div class="row justify-content-center py-2">
    <div class="col-lg-6 col-md-8">
        <div class="card border-0 shadow-lg overflow-hidden">
            <!-- Header Section -->
            <div class="bg-primary px-4 py-4 text-white text-center">
                <div class="stat-card-icon bg-white bg-opacity-20 mx-auto mb-3" style="width: 60px; height: 60px;">
                    <i class="bi bi-calendar2-plus h3 mb-0"></i>
                </div>
                <h4 class="fw-bold mb-1">Appointment Request</h4>
                <p class="mb-0 opacity-75 small text-uppercase fw-semibold" style="letter-spacing: 1px;">Clinical Consultation Booking</p>
            </div>

            <div class="card-body p-4 p-lg-5">
                <!-- Doctor Context -->
                <div class="d-flex align-items-center mb-5 p-3 rounded-4 bg-soft-primary border border-primary border-opacity-10">
                    <div class="avatar-sm bg-white rounded-circle shadow-sm d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                        <i class="bi bi-person-badge text-primary h4 mb-0"></i>
                    </div>
                    <div>
                        <div class="text-muted x-small fw-bold text-uppercase">Booking with</div>
                        <h5 class="fw-bold text-dark mb-0">Dr. {{ doctor.user.first_name }} {{ doctor.user.last_name }}</h5>
                        <div class="text-primary small fw-semibold">{{ doctor.specialization }}</div>
                    </div>
                </div>

                <!-- Booking Form -->
                <form method="POST">
                    <div class="row g-4 mb-4">
                        <div class="col-md-6">
                            <label class="uppercase-label mb-2 d-block">Consultation Date</label>
                            <div class="input-group shadow-sm border rounded">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-calendar-event"></i></span>
                                <input type="date" class="form-control border-0" id="appointment_date" name="appointment_date" 
                                       min="{{ today }}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="uppercase-label mb-2 d-block">Preferred Time</label>
                            <div class="input-group shadow-sm border rounded">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-clock"></i></span>
                                <input type="time" class="form-control border-0" id="appointment_time" name="appointment_time" 
                                       required>
                            </div>
                        </div>
                        <div class="col-12">
                            <label class="uppercase-label mb-2 d-block">Reason for Consultation</label>
                            <textarea class="form-control shadow-sm border p-3" id="reason" name="reason" rows="3" 
                                      placeholder="Describe your current symptoms or health concerns..."></textarea>
                        </div>
                    </div>

                    <!-- Fee Advisory -->
                    <div class="p-3 bg-light rounded-4 mb-4 d-flex gap-3 align-items-start border">
                        <i class="bi bi-info-circle-fill text-primary mt-1"></i>
                        <div class="small text-muted">
                            <p class="mb-1">Appointments are subject to clinical approval. You will be notified via the dashboard pulse.</p>
                            <p class="mb-0">Estimated Fee: <strong class="text-dark">{{ doctor.consultation_fee | currency_inr }}</strong> (Payable at the front desk)</p>
                        </div>
                    </div>

                    <!-- Form Controls -->
                    <div class="d-grid gap-3">
                        <button type="submit" class="btn btn-primary btn-lg shadow-sm py-3">
                            <i class="bi bi-calendar-check me-2"></i> Submit Request
                        </button>
                        <a href="{{ url_for('patient.list_doctors') }}" class="btn btn-light border-0 py-2">
                            Return to List
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
